@model EMatrix.ViewModels.Products.ProductsIndexViewModel

<link rel="stylesheet" href="~/css/products-preview-customization.css" asp-append-version="true"/>

@{
    ViewData["Title"] = "Продукти";
}

<div class="container-fluid mt-3 products-container">
    <div class="products-header">
        <div class="search-bar">
            <input class="form-control" id="search" name="search" placeholder="Търси продукти.."/>
            <button type="submit" class="btn btn-info text-light">Търси</button>
        </div>
        <div class="accordion" id="menuAccordion">
            <h4>Категории продукти</h4>
            @for (int i = 0; i < Model.Menu.Count; i++)
            {
                var menuItem = Model.Menu[i];
                var headingId = $"heading-{i}";
                var collapseId = $"collapse-{i}";

                <div class="accordion-item">
                    <h2 class="accordion-header" id="@headingId">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#@collapseId" aria-expanded="false" aria-controls="@collapseId">
                            @menuItem.Name
                        </button>
                    </h2>
                    <div id="@collapseId" class="accordion-collapse collapse" aria-labelledby="@headingId"
                         data-bs-parent="#menuAccordion">
                        <div class="accordion-body">
                            <ul class="navbar-nav">
                                @foreach (var category in menuItem.Categories)
                                {
                                    <li class="nav-item">
                                        <a class="nav-link" asp-area="" asp-controller="Products"
                                           asp-action="GetProducts"
                                           asp-route-categoryId="@category.Key">
                                            @category.Value
                                        </a>
                                    </li>
                                }
                            </ul>
                            <ul class="navbar-nav">
                                @foreach (var subCategory in menuItem.SubCategories)
                                {
                                    <li class="nav-item">
                                        <a class="nav-link" asp-area="" asp-controller="Products"
                                           asp-action="GetProducts"
                                           asp-route-categoryId="@subCategory.Key">
                                            @subCategory.Value
                                        </a>
                                    </li>
                                }
                            </ul>
                            <ul class="navbar-nav">
                                @foreach (var set in menuItem.SubGroupSets)
                                {
                                    <li class="nav-item">
                                        <a class="nav-link" asp-area="" asp-controller="Products"
                                           asp-action="GetProducts"
                                           asp-route-categoryId="@set.Key">
                                            @set.Value
                                        </a>
                                    </li>
                                }
                            </ul>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
    <div class="menu-as-grid">
        @foreach (var cat in Model.MenuItemsGrid)
        {
            <div>
                <img src="@Url.Content(cat.Icon)" alt="icon"/>
                <p>@cat.Name</p>
            </div>
        }
    </div>
</div>

